spring:
  application:
    name: Mental Health Forum Backend

  # ----------------------------------------------------------------------
  # Keycloak OAuth2 Configuration (Existing)
  # ----------------------------------------------------------------------
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://localhost:9080/realms/mentalhealthforum
          principal-claim-name: preferred_username

  # ----------------------------------------------------------------------
  # R2DBC Database Configuration (MOVED & FIXED INDENTATION)
  # ----------------------------------------------------------------------
  r2dbc:
    url: r2dbc:postgresql://localhost:5434/forum
    username: forum_user
    password: forum_password

  sql:
    # Disable schema initialization if you are using a migration tool (like Flyway)
    init:
      enabled: false

keycloak:
  auth-server-url: http://localhost:9080
  realm: mentalhealthforum
  resource: mhf-backend
  credentials:
    secret: ${MHF_BACKEND_SECRET:2uVmExC9Jm5R3whLLicrICsWuY6n4vMq}

logging:
  level:
    org.springframework.security: INFO
    com.mentalhealthforum: DEBUG

    # R2DBC Logging
    io.r2dbc: DEBUG
    org.springframework.data.r2dbc: DEBUG
    org.springframework.jdbc.core: DEBUG

    # -----------------------------------------------------
    # LOG KEYCLOAK'S UNDERLYING HTTP TRAFFIC
    # -----------------------------------------------------
    org.jboss.resteasy: DEBUG
    org.apache.http: DEBUG
    org.apache.http.wire: DEBUG